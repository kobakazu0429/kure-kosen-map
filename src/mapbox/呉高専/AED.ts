import mapboxgl from "mapbox-gl";
import { FeatureCollection } from "geojson";
import AED from "../../geojson/AED.json";

export interface PanoramFeatureProperties {
  placename: string;
  filename: string;
}

const iconImage = "AED";

export const aed: mapboxgl.Layer = {
  id: "AED",
  type: "symbol",
  source: {
    type: "geojson",
    data: AED as FeatureCollection,
  },
  minzoom: 16,
  layout: {
    "icon-image": iconImage,
    "icon-size": 1,
    visibility: "visible",
  },
};

export function registerAED(mapbox: mapboxgl.Map) {
  // `mapbox.loadImage` cannot load `.svg`, so solved below code's.
  const img = new Image(30, 30);
  img.src =
    'data:image/svg+xml;utf8,<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" style="width: 256px; height: 256px; opacity: 1;" xml:space="preserve"><g><path class="st0" d="M367.703,122.859c-60.344,0-99.938,32.109-111.703,69.734c-11.766-37.625-51.359-69.734-111.703-69.734c-63.719,0-121.344,58.406-115.375,138.266C37.109,370.688,224.5,512,256,512s218.891-141.313,227.078-250.875C489.047,181.266,431.422,122.859,367.703,122.859z M348.094,292.25L182.906,433.625l55-99.781h-45.063l47.203-116.406h109.484l-56.703,74.813H348.094z" style="fill: rgb(223, 86, 86);"></path><path class="st0" d="M112.391,95.672h13.641c0.984,0,1.547-0.422,1.828-1.406l6.328-18.563l1.797-5.266h32.422l1.797,5.266l6.344,18.563c0.281,0.984,0.844,1.406,1.828,1.406h13.781c0.984,0,1.266-0.578,0.984-1.406L160.781,1.406C160.5,0.578,159.938,0,158.953,0H146c-0.969,0-1.547,0.578-1.828,1.406l-32.781,92.859C111.125,95.094,111.391,95.672,112.391,95.672z M152.063,23.781h0.422l11.984,35.156h-24.531L152.063,23.781z" style="fill: rgb(223, 86, 86);"></path><path class="st0" d="M227.828,95.672h59.938c0.844,0,1.422-0.578,1.422-1.406V82.156c0-0.844-0.578-1.391-1.422-1.391h-43.891c-0.563,0-0.844-0.297-0.844-0.859V55.719c0-0.563,0.281-0.844,0.844-0.844h30.328c0.828,0,1.391-0.563,1.391-1.406V41.375c0-0.859-0.563-1.422-1.391-1.422h-30.328c-0.563,0-0.844-0.281-0.844-0.844V15.781c0-0.594,0.281-0.859,0.844-0.859h43.891c0.844,0,1.422-0.578,1.422-1.422V1.406c0-0.828-0.578-1.406-1.422-1.406h-59.938c-0.844,0-1.391,0.578-1.391,1.406v92.859C226.438,95.094,226.984,95.672,227.828,95.672z" style="fill: rgb(223, 86, 86);"></path><path class="st0" d="M332.188,95.672h34.188c16.469,0,27.438-7.313,31.938-21.25c1.547-4.781,2.391-9.984,2.391-26.594c0-16.594-0.844-21.797-2.391-26.578C393.813,7.328,382.844,0,366.375,0h-34.188c-0.844,0-1.406,0.578-1.406,1.406v92.859C330.781,95.094,331.344,95.672,332.188,95.672z M347.391,15.781c0-0.594,0.281-0.859,0.844-0.859h14.203c10.547,0,17.016,3.516,19.828,12.094c1,2.672,1.703,6.891,1.703,20.813c0,13.797-0.703,18.172-1.703,20.828c-2.813,8.578-9.281,12.109-19.828,12.109h-14.203c-0.563,0-0.844-0.297-0.844-0.859V15.781z" style="fill: rgb(223, 86, 86);"></path></g></svg>';
  mapbox.addImage(iconImage, img);
}
